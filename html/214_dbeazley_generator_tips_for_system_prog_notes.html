<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8" />
    <title>generator tips</title>
    <link rel="icon" href="http://xu/tgdfiles/icon/bonnie.ico" />
    <style>
div { color: black;}
    </style>
  </head>

  <body>
    <div class="container">
      <header>
        Generator Tips for System Programmers (David Beazley) Notes
      </header>
      <div class="counter">xx</div>
      <main>
        <dl>
          <dt>Iteration Protocol</dt>
          <dd>Any object that supports <code>iter()</code> and
            <code>next()</code>is said to be "iterable"</dd>

          <dd>user-defined objects can support iteration</dd>
          <dd>You just need to make the object implement 
            <code>__iter__()</code>
            and
            <code>next()</code>
          </dd>   

          <dd>
            <pre> 

      class countdown(object):
          def __init__(self, start):
              self.count=start

          def __iter__(self):
              return self

          def next(self):
              if self.count &lt;= 0:
                  raise StopIteration
              r=self.count
              self.count -= 1
              return r

      c1=countdown(10)
      print(c1.next())  //  10
      print(c1.next())  //   9
      print(c1.next())  //   8
      print(c1.next())  //   7

            </pre>
          </dd>
          <dt>Generators</dt>
          <dd>A generator is a function that produces a sequence</dd> 
          <dd>of results instead of a single value</dd>
          <dd>
            <pre>

      def countdown(n):
          print("Counting down from", n
          while  n &gt; 0:
              yield n
              n -= 1

      c2 = countdown(2)
      print(c2)             //  <generator object countdown at 0x7f5fa0378270>
                            //  Note that no output is produced!

      print(next(c2))       //  Counting down from 2
                            //  2
                            //  'yield' produces a value but suspends the function

      print(c2.__next__())  //  1 

      print(next(c2))

          // Traceback (most recent call last):
          // File "/mnt/c/Users/thoma/acp/rmpy/html/out.py", line 12, in <module>
          //     print(next(c2))
          // StopIteration

          // When the generator RETURNS, iteration stops
            </pre>
          </dd>
          j
          <dd>A generator function is mainly a more convenient way of writing an iterator</dd>
          <dd>You don't have to worry about the iterator protocol</dd> 
          <dd>(<code>next()</code>, <code>.__iter__()</code>, etc.</dd>
          <dd>A generator is a <em>one time operation</em></dd>
          <dd>You can iterate of the generated data once</dd>
          <dd>But if you want to do it again, you have to call the generator function again </dd>   
          <dd>This is different from a list (which you can iterate over as many times
            as you want) </dd>   
          <dt>Generator Expressions</dt>
          <dd>Important differences from list comprehension</dd>
          <dd>
            <ul>
              <li>Does not construct a list
                <li>Only useful purpose is iteration
                  <li>Once consumed, can't be reused
            </ul>
          </dd>
          <dd>
         <pre>  
        a = [1,2,3,5]
        b = (2*x for x in a)
        print(b)             //    <generator object <genexpr> at 0x7f022d9f4270>
         </pre> 
          </dd>
        </dl>
      </main>
      <div class="syntax">
        <details>
          <summary>Syntax</summary>
          <pre>
          Syntax One
          </pre>
        </details>
      </div>
      <div class="examples">
        <details><!--begin-outer-details-->
          <summary>Examples</summary>
          <details><!--inner-->
            <summary>Example 1</summary>
            <pre>
            [code]
            </pre>
          </details><!--inner-->
        </details><!--end-outer-details-->
      </div>
      <div class="notes">
        <details>
          <summary>Notes</summary>
          <d>
          <dt>References</dt>

          <dd>
            <p>
            <a href ="https://www.slideshare.net/dabeaz/generator-tricks-for-systems-programmers-v20">
              Generator Tricks for Systems Programmers (version 2) [David Beazley]
            </a>
            </p>
          </dd>

          <dd>
            <p>
            <a href ="https://speakerdeck.com/dabeaz/generator-tricks-for-systems-programmers-version-3-dot-0?slide=13">
              Generator Tricks for Systems Programmers (vesion 3) [David Beazley]
            </a>
            </p>
          </dd>
          </dl>
        </details>
      </div>
    </div>
  </body>
</html>
